## MySQL存储空间



![image-20240321161834308](./assets/image-20240321161834308.png)





以BigInt作为Mysql的主键
B+树的层高为3

PageSize=16KB  一页的大小（InnoDB存储引擎的页面大小，默认16KB，可配置，当系统内存充足，可以考虑将PageSize设置为32KB或者更大，但是，更改页面大小需要非常谨慎，因为它会影响到数据库的整体性能和内存使用，并且在更改后需要重新创建整个数据库，通常不建议这样做）

```ini
[mysqld]
innodb_page_size = 16K
```



索引存储空间：

- 8B（字节）的key值存储：8*8 bit 存储bigint 2^64 的注解值
- 6B（字节）的指针存储：InnoDB设计的指针大小为6B，为了方便计算，可粗略为8B



计算：

一页非叶子节点存储的元素个数：16KB /  (8B + 8B) = 1K 

两层非叶子可存储的元素个数为：1K * 1K = 1000000 个 

叶子节点的数量 = 1000000 * 1K = 10 0000 0000 个



可存储数据量约：10亿

占用磁盘约：

- 假设每个数据1kb：10 0000 0000 * 1KB = 953GB



如果用32B的String做主键，那么只能存储约：6400万

- 16000B / (32+8) = 400

- 400 ^3 = 6400万





千GB的数据量，大概需要给到200-300GB的MySQL内存

